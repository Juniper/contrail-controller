options {
    directory "./";
    managed-keys-directory "./";
    empty-zones-enable no;
    pid-file "./contrail-named.pid";
    listen-on port 53 { any; };
    allow-query { any; };
    allow-recursion { any; };
    allow-query-cache { any; };
    max-cache-size 100M;
};

key "rndc-key" {
    algorithm hmac-md5;
    secret "xvysmOR8lnUQRBcunkC6vg==";
};

controls {
    inet 127.0.0.1 port 8094
    allow { 127.0.0.1; }  keys { "rndc-key"; };
};

logging {
    channel debug_log {
        file "/var/log/named/bind.log" versions 3 size 5m;
        severity debug;
        print-time yes;
        print-severity yes;
        print-category yes;
    };
    category default {
        debug_log;
    };
    category queries {
        debug_log;
    };
};

view "last-DNS" {
    rrset-order {order cyclic;};
    virtual-forwarder "juniper.net";
    zone "test.juniper.net" IN {
        type master;
        file "./test.juniper.net.zone";
        allow-update {127.0.0.1;};
    };
};

view "last-DNS1" {
    rrset-order {order fixed;};
    virtual-forwarder "juniper.net";
    zone "test1.juniper.net" IN {
        type master;
        file "./test1.juniper.net.zone";
        allow-update {127.0.0.1;};
    };
};

view "new-DNS" {
    rrset-order {order random;};
    virtual-forwarder "example.com";
    zone "test.example.com" IN {
        type master;
        file "./test.example.com.zone";
        allow-update {127.0.0.1;};
    };
};

view "test-DNS" {
    rrset-order {order random;};
    virtual-forwarder "juniper.net";
    zone "contrail.juniper.net" IN {
        type master;
        file "./contrail.juniper.net.zone";
        allow-update {127.0.0.1;};
    };
};

view "_default_view_" {
    match-clients {any;};
    match-destinations {any;};
    match-recursive-only no;
};

