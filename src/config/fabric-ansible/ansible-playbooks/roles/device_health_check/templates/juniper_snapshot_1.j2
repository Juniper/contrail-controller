version:
  - command: show system database usage
  - ignore-null: True
  - item:
      xpath: '/database-usage'
      tests:
        - is-gt: maximum-size, 0
          err: "Test Failed!!"
          info: "Test succeeded!!"
{% if advanced_parameters.interface_error_count_check == True or advanced_parameters.interface_drop_count_check == True or advanced_parameters.interface_carrier_transition_count_check == True %}
interface_extensive:
  - command: show interface extensive
  - ignore-null: True
{% if advanced_parameters.interface_error_count_check == True %}
  - iterate:
      xpath: '//physical-interface/input-error-list'
      id: '../name'
      tests:
        - no-diff: input-errors
          err: "Test Failed!! input-errors of {% raw %}<{{post['input-errors']}}>{% endraw %} is greater than {% raw %}<{{pre['input-errors']}}>{% endraw %}"
          info: "Test succeeded!! input-errors is equal to {% raw %}<{{post['input-errors']}}>{% endraw %}"
{% endif %}
{% if advanced_parameters.interface_drop_count_check == True %}
  - iterate:
      xpath: '//physical-interface/input-error-list'
      id: '../name'
      tests:
        - no-diff: input-drops
          err: "Test Failed!! input-drops of {% raw %}<{{post['input-drops']}}>{% endraw %} is greater than {% raw %}<{{pre['input-drops']}}>{% endraw %}"
          info: "Test succeeded!! input-drops is equal to {% raw %}<{{post['input-drops']}}>{% endraw %}"
{% endif %}
{% if advanced_parameters.interface_carrier_transition_count_check == True %}
  - iterate:
      xpath: '//physical-interface/output-error-list'
      id: '../name'
      tests:
        - no-diff: carrier-transitions
          err: "Test Failed!! carrier-transitions of {% raw %}<{{post['carrier-transitions']}}>{% endraw %} is greater than {% raw %}<{{pre['carrier-transitions']}}>{% endraw %}"
          info: "Test succeeded!! carrier-transitions is equal to {% raw %}<{{post['carrier-transitions']}}>{% endraw %}"
{% endif %}
{% endif %}
