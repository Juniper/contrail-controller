{
  "comments": [
    {
      "key": {
        "uuid": "021ee6c6_5db4c2a8",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 9
      },
      "lineNbr": 619,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "Did you wrote UT to validate that?",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2328a69c_a8215542",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_port_group.py",
        "patchSetId": 9
      },
      "lineNbr": 35,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "Don\u0027t limit the check to the first item of the list, if for any reason VMI have more that one VPG back-ref, list all of them in the error message. Also not just use the VPG name in the error message but all the FQ name and the UUID, it\u0027s more useful for troubleshooting.\nWhat about the update? Could we update the \u0027virtual_port_group_trunk_port_id\u0027? If yes, we should take care to not use a VMI already use by another trunk.\nNo UT for that?\nIMO, we should take care of the ref create/delete here in the API server and vnc_openstack code or a user just have to set \u0027virtual_port_group_trunk_port_id\u0027 VPG property",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bdac229_c2f3dbbd",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6258,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "We don\u0027t set the segmentation type and ID on the sub-port?",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fba8fcce_d46063e0",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6258,
      "author": {
        "id": 623
      },
      "writtenOn": "2019-08-07T13:57:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6bdac229_c2f3dbbd",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6500fa0f_3866932b",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6269,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "trunk update can contains some sub-port to add and some to remove. Not necessary only add or remove sub-port.",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5d8c052_34399f2d",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6273,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "you don\u0027t set the trunk name in the VPG \u0027display_name\u0027 property",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9749482_9878bb75",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6273,
      "author": {
        "id": 623
      },
      "writtenOn": "2019-08-07T13:57:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5d8c052_34399f2d",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d087718_1a1c0f1f",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6285,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "Should be done in the API server IMO",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7753b70_136fbaed",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6374,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "miss segmentation type and ID properties of the sub-port",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22e5598a_fdeacea3",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_db.py",
        "patchSetId": 9
      },
      "lineNbr": 6374,
      "author": {
        "id": 623
      },
      "writtenOn": "2019-08-07T13:57:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a7753b70_136fbaed",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c90c79f2_adc65882",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_interface.py",
        "patchSetId": 9
      },
      "lineNbr": 1158,
      "author": {
        "id": 10
      },
      "writtenOn": "2019-07-15T17:43:13Z",
      "side": 1,
      "message": "I think you missed the sub-port list API call https://developer.openstack.org/api-ref/network/v2/?expanded\u003dcreate-trunk-detail,delete-subports-from-trunk-detail,list-trunks-detail,list-subports-for-trunk-detail,add-subports-to-trunk-detail#list-subports-for-trunk",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d291a8df_ad0cb99d",
        "filename": "src/config/vnc_openstack/vnc_openstack/neutron_plugin_interface.py",
        "patchSetId": 9
      },
      "lineNbr": 1158,
      "author": {
        "id": 623
      },
      "writtenOn": "2019-08-07T13:57:27Z",
      "side": 1,
      "message": "that\u0027s handled. I tested out in one of my setups:\n\n(kolla-toolbox)[ansible@b4s9 /var/log/kolla/neutron]$ openstack network trunk show SATHISH-trunk2\n+----------------+--------------------------------------------------------------------------------------------------+\n| Field          | Value                                                                                            |\n+----------------+--------------------------------------------------------------------------------------------------+\n| admin_state_up | UP                                                                                               |\n| id             | ceb2a63d-dc87-4ebc-9002-22638c3d7515                                                             |\n| name           | SATHISH-trunk2                                                                                   |\n| port_id        | ba0cb8f1-7637-4639-8c58-5139ec484687                                                             |\n| project_id     | 928808e85c78431c8090be3847ad8f03                                                                 |\n| status         | DOWN                                                                                             |\n| sub_ports      | port_id\u003d\u0027df518237-b977-4ef2-a14e-589b655054db\u0027, segmentation_id\u003d\u00272132\u0027, segmentation_type\u003d\u0027vlan\u0027 |\n|                | port_id\u003d\u0027898694a4-5e9a-4a92-8d1e-78243b773a56\u0027, segmentation_id\u003d\u0027100\u0027, segmentation_type\u003d\u0027vlan\u0027  |\n| tenant_id      | 928808e85c78431c8090be3847ad8f03                                                                 |\n+----------------+--------------------------------------------------------------------------------------------------+\n(kolla-toolbox)[ansible@b4s9 /var/log/kolla/neutron]$ \n(kolla-toolbox)[ansible@b4s9 /var/log/kolla/neutron]$ \n(kolla-toolbox)[ansible@b4s9 /var/log/kolla/neutron]$ openstack network subport list --trunk SATHISH-trunk2\n+--------------------------------------+-------------------+-----------------+\n| Port                                 | Segmentation Type | Segmentation ID |\n+--------------------------------------+-------------------+-----------------+\n| df518237-b977-4ef2-a14e-589b655054db | vlan              |            2132 |\n| 898694a4-5e9a-4a92-8d1e-78243b773a56 | vlan              |             100 |\n+--------------------------------------+-------------------+-----------------+",
      "parentUuid": "c90c79f2_adc65882",
      "revId": "712f21f8e77a7a942311ed04750a3c314956576e",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    }
  ]
}