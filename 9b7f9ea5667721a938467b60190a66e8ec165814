{
  "comments": [
    {
      "key": {
        "uuid": "2b083a7c_fb95fa8e",
        "filename": "src/config/api-server/vnc_cfg_api_server/api_server.py",
        "patchSetId": 14
      },
      "lineNbr": 4372,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-07T19:57:00Z",
      "side": 1,
      "message": "I think this if/else is not required.  we can just return ok, result if not ok.\n\nBecause, when the pre_dbe_update returns due to failure, it will return (False, (code, msg), zk_update_kwargs). \n\nwhich means in case of failure always (code, msg) which is the result is retuned.",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68d96598_a3d2d82f",
        "filename": "src/config/api-server/vnc_cfg_api_server/api_server.py",
        "patchSetId": 14
      },
      "lineNbr": 4444,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-07T19:57:00Z",
      "side": 1,
      "message": "I don\u0027t think we need to pass ref_update\u003dNone.\n\nAs the argument in base method defaults to None https://github.com/Juniper/contrail-controller/blob/master/src/config/api-server/vnc_cfg_api_server/resources/_resource_base.py#L156",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d912fdc6_1e7e121c",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/application_policy_set.py",
        "patchSetId": 14
      },
      "lineNbr": 112,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-07T19:57:00Z",
      "side": 1,
      "message": "We can simply return ok, result, None. without this if check",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcd76db3_65bffb0c",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/application_policy_set.py",
        "patchSetId": 14
      },
      "lineNbr": 116,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-07T19:57:00Z",
      "side": 1,
      "message": "We can simply return ok, result, None. without this if check",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7b356295_ca6bf398",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/data_center_interconnect.py",
        "patchSetId": 14
      },
      "lineNbr": 419,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "We can just \n\nreturn ok, result, None\n\nNo need for the if condition",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4da58bad_05c77d23",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/domain.py",
        "patchSetId": 14
      },
      "lineNbr": 29,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "post_dbe_update need not send third argument",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d790fd5b_3f87794e",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/firewall_policy.py",
        "patchSetId": 14
      },
      "lineNbr": 33,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "No need for if check\n\nreturn ok, result, None",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd822733_e908f755",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/forwarding_class.py",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "If check is not required",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "923bf74c_94e084af",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/global_system_config.py",
        "patchSetId": 14
      },
      "lineNbr": 317,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "no need for if check",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09010d52_39c27fb0",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/logical_router.py",
        "patchSetId": 14
      },
      "lineNbr": 384,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "if condition is not required",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "644b3acd_c03aeb96",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/network_policy.py",
        "patchSetId": 14
      },
      "lineNbr": 23,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "no need for if condition",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f10cd943_efd89797",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/port_profile.py",
        "patchSetId": 14
      },
      "lineNbr": 32,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "No need of if condition",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7acc83be_d591052a",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/qos_config.py",
        "patchSetId": 14
      },
      "lineNbr": 46,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "if condition not required",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "356f70cf_63e571a5",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/route_aggregate.py",
        "patchSetId": 14
      },
      "lineNbr": 38,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same here",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da42b416_d81731a1",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/route_table.py",
        "patchSetId": 14
      },
      "lineNbr": 18,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aeb712d8_ebf32d70",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/routing_instance.py",
        "patchSetId": 14
      },
      "lineNbr": 55,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14f4a7eb_f89b59b5",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/service_group.py",
        "patchSetId": 14
      },
      "lineNbr": 44,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88f65324_912050ec",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/sflow_profile.py",
        "patchSetId": 14
      },
      "lineNbr": 23,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf3b821d_167f8c66",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/storm_control_profile.py",
        "patchSetId": 14
      },
      "lineNbr": 57,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "209a4b65_f567c567",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/telemetry_profile.py",
        "patchSetId": 14
      },
      "lineNbr": 45,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ecd411c_ccfc270f",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_dns.py",
        "patchSetId": 14
      },
      "lineNbr": 34,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "same",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b04e72f_39a642d9",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_dns_record.py",
        "patchSetId": 14
      },
      "lineNbr": 21,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:14:36Z",
      "side": 1,
      "message": "no if",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1cd7fba_d726e51e",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 14
      },
      "lineNbr": 1455,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "zk_vpg_lock_path argument is removed",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee02a803_153f2ce7",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 14
      },
      "lineNbr": 1470,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "zk_vmi_untagged_lock_path is used in only one place, so we dont need a variable, we can directly form in line 1479",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20b4a2ad_b9235d95",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 14
      },
      "lineNbr": 1473,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "zk_vmi_tagged_lock_path is used in only one place, so we dont need a variable, we can directly form in line 1482",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b94c6ec7_d1b0fdbc",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 14
      },
      "lineNbr": 1485,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "Rename the comment to # Service provider fabric validation ZNodes",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3ab6262_7088c4a4",
        "filename": "src/config/api-server/vnc_cfg_api_server/resources/virtual_machine_interface.py",
        "patchSetId": 14
      },
      "lineNbr": 1494,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "I see that these line 1470 till 1551 can be refactored to avoid multiple if/else  and code duplication as below,\n\nif is_untagged_vlan:\n    vmi_lock_args \u003d {\u0027zookeeper_client\u0027: db_conn._zk_db._zk_client,\n                \u0027path\u0027: zk_vmi_untagged_lock_path,\n                \u0027name\u0027: vmi_uuid, \u0027timeout\u0027: 60}\n    validation_znode \u003d os.path.join(\n            _DEFAULT_ZK_SERVICE_PROVIDER_FABRIC_VALIDATION_PATH_PREFIX,\n            (\u0027virtual-port-group:%s/untagged\u0027) % vpg_uuid)\nelse: \n    vmi_lock_args \u003d {\u0027zookeeper_client\u0027: db_conn._zk_db._zk_client,\n                     \u0027path\u0027: zk_vmi_tagged_lock_path,\n                     \u0027name\u0027: vmi_uuid, \u0027timeout\u0027: 60}\n    validation_znode \u003d os.path.join(\n            _DEFAULT_ZK_SERVICE_PROVIDER_FABRIC_VALIDATION_PATH_PREFIX,\n            (\u0027virtual-port-group:%s/virtual-network:%s/vlan:%s\u0027)\n            % (vpg_uuid, vn_uuid, vlan_id))\n\ntry:\n    cls.db_conn._zk_db._zk_client.create_node(\n        validation_znode, value\u003dvmi_uuid)\n    if db_vlan_id and (db_vlan_id !\u003d vlan_id):  # Check for vlan_update case\n        return True, \u0027\u0027, {\u0027delete_validation_znode\u0027: db_vlan_id}\n    return True, \u0027\u0027, None\nexcept ResourceExistsError: # Might be STALE\n    ok, result \u003d cls.dbe_read(db_conn,\n                              \u0027virtual_machine_interface\u0027,\n                               vmi_uuid)\n    if ok:  # Not STALE\n        msg \u003d \"Znode with %s virtual_machine_interface already exists\" % vmi_uuid\n        return False, (400, msg), None\n    else:  # STALE\n        with ZookeeperLock(**vmi_lock_args):\n            cls.db_conn._zk_db._zk_client.update_node(\n                validation_znode, repr(vmi_uuid).encode(\u0027ascii\u0027))\n        return True, \u0027\u0027, None",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4c968ab_def54953",
        "filename": "src/config/api-server/vnc_cfg_api_server/tests/resources/test_virtual_port_group.py",
        "patchSetId": 14
      },
      "lineNbr": 1184,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "remove pdb\u0027s",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "59dd7c93_a813be9c",
        "filename": "src/config/api-server/vnc_cfg_api_server/tests/resources/test_virtual_port_group.py",
        "patchSetId": 14
      },
      "lineNbr": 1199,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "remove pdb\u0027s",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa60cc50_a552405f",
        "filename": "src/config/api-server/vnc_cfg_api_server/tests/resources/test_virtual_port_group.py",
        "patchSetId": 14
      },
      "lineNbr": 1253,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "Lets have a comment \n\n# verify validation Znodes are created",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db061139_87c3e90d",
        "filename": "src/config/api-server/vnc_cfg_api_server/tests/resources/test_virtual_port_group.py",
        "patchSetId": 14
      },
      "lineNbr": 1278,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T02:01:33Z",
      "side": 1,
      "message": "Let have a comment similar to older version. say,\n\n        # Verify validation ZNodes are removed when VMI is\n        # unassociated",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec4a643b_b8b73b7a",
        "filename": "src/config/common/cfgm_common/zkclient.py",
        "patchSetId": 14
      },
      "lineNbr": 615,
      "author": {
        "id": 56
      },
      "writtenOn": "2020-08-08T01:17:25Z",
      "side": 1,
      "message": "why do we need to support default value for update_node?\nif some one is using update_node api, it means they have a value to update.\n\nSo make value a mandatory argument in update_node api",
      "revId": "9b7f9ea5667721a938467b60190a66e8ec165814",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}